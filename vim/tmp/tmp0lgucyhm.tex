% Input your problem and solution below.
% Three dashes on a newline indicate the breaking points.

---

Let $f:\mathbb Z\to\mathbb Z$ be a function such that for all integers $m$ and $n$,
\[f(m)+f(n)+f(f(m^2+n^2))=1.\]
Given there are integers $a$ and $b$ such that $f(a)-f(b)=3$, prove that there are integers $c$ and $d$ such that $f(c)-f(d)=1$.

---

The two following observations are all the information we need from the functional equation to solve the problem:
\begin{itemize}[itemsep=0em]
    \item By flipping $m$, we deduce that $f$ is even.
    \item Let $S$ denote the range of $f$. If $a,b\in S$, then $1-a-b\in S$.
\end{itemize}
Now let $c,c+3\in S$. We have $1-2c$, $1-2c-3$ ,$1-2c-6$ are in $S$, so $c-3$, $c+6$ are in $S$. Repeating with $c-3,c\in S$ and $c+3,c+6\in S$, and so on, all $n$ with $n\equiv c\pmod3$ are in $S$.

Repeating for $1-2c$, $1-2c-3$, etc., all $n$ with $n\equiv1-2c\pmod3$ are in $S$. The equivalence classes $[c\pmod3]$ and $[1-2c\pmod3]$ are distinct, so they contain two consecutive elements, end proof.

