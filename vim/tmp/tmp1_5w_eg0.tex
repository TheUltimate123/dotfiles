% Input your problem and solution below.
% Three dashes on a newline indicate the breaking points.

---

Let $n$ be a positive integer, and consider a sequence $a_1$, $a_2$, $\ldots$, $a_n$ of positive integers. Extend it periodically to an infinite sequence $a_1$, $a_2$, $\ldots$ by defining $a_{n+i}=a_i$ for all $i\ge1$. If \[a_1\le a_2\le\cdots\le a_n\le a_1+n\quad\text{and}\quad a_{a_i}\le n+i-1\quad\text{for }i=1,2,\ldots,n,\]
prove that $a_1+\cdots+a_n\le n^2$.
