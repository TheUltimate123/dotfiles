% Input your problem and solution below.
% Three dashes on a newline indicate the breaking points.

---

The $n$ contestants of EGMO are named $C_1$, $C_2$, $\ldots$, $C_n$. After the competition, the contestants queue in front of the restaurant in an order of the Jury's choosing. Every minute, the Jury chooses an integer $i$ with $1\le i\le n$ such that contestant $C_i$ has at least $i$ other contestants in front of her; she pays one euro to the Jury and moves forward in the queue by exactly $i$ positions. If no such $i$ exists, the restaurant opens and the process ends.
\begin{enumerate}[label=(\alph*)]
    \item Prove that the process cannot continue indefinitely, regardless of the Juryâ€™s choices.
    \item For each $n$, determine the maximum number of euros that the Jury can collect by cunningly choosing the initial order and the sequence of moves.
\end{enumerate}

---

The answer to (b) is $2^n-n-1$; proving (b) will prove (a). It is easy to check that $2^n-n-1$ is attainable via induction:
\begin{itemize}[itemsep=0em]
    \item Begin in the order $C_n$, $C_{n-1}$, $\ldots$, $C_1$.
    \item Sort the last $n-1$ contestants, so the order is now $C_n$, $C_1$, $\ldots$, $C_{n-1}$.
    \item Each of the last $n-1$ contestants jumps over $n$, so the order is now $C_{n-1}$, $\ldots$, $C_1$, $C_n$.
    \item Sort the first $n-1$ contestants, so the order is now $C_1$, $\ldots$, $C_{n-1}$, $C_n$.
\end{itemize}
By the inductive hypothesis $n-1$, the number of euros earned is $n-1+2(2^{n-1}-n)=2^n-n-1$.\\

To prove the upper bound, we generalize such that each $C_i$ is allowed to move forward in the queue by at least $i$ positions. (For this proof, it is necessary to work in this generality.)

Again we proceed by induction on $n$, with the base case $n=1$ negligible. Assume the hypothesis holds for $n-1$. By the inductive hypothesis, the contestants $C_2$, $\ldots$, $C_n$ pay a maximum of $2^{n-1}-n$ euros; it will suffice to show $C_1$ pays at most $2^{n-1}-1$ euros.

Consider the position of $C_1$ in the queue. By inductive hypothesis on $C_2$, $\ldots$, $C_n$, her position increments at most $2^{n-1}-n$ times. Her initial position is at most $n$ and her final position must be $1$, so she moves at most $(n-1)+(2^{n-1}-n)=2^{n-1}-1$ times, as needed.


