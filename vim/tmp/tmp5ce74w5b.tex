% Input your problem and solution below.
% Three dashes on a newline indicate the breaking points.

---

Let $S=\{1,2,\ldots,n\}$, where $n\ge1$. Each of the $2^n$ subsets of $S$ is to be colored red or blue. (The subset itself is assigned a color and not its individual elements.) For any set $T\subseteq S$, we then write $f(T)$ for the number of subsets of $T$ that are blue.

Determine the number of colorings that satisfy the following condition: for any subsets $T_1$ and $T_2$ of $S$, \[f(T_1)f(T_2)=f(T_1\cup T_2)f(T_1\cap T_2).\]

---

The answer is $3^n+1$. All colorings (except everything red) are of the form: for some sets $A\subseteq B$, color $S$ blue if and only if $A\subseteq S\subseteq B$. It is easy to see that these work, say by PIE with $f(T)=2^{|T\cap(B\setminus A)|}$.

We will proceed by induction. The base case can be easily verified. Now color subsets without $n$ and subsets with $n$ independently. Suppose a subset in the former category is colored if and only if $A_1\subseteq S\subseteq B_1$ and a subset in the latter category is colored if and only if $A_2\cup\{n\}\subseteq S\subseteq B_2\cup\{n\}$. The goal is to prove $A_1=A_2$ and $B_1=B_2$.

The key is to note \[f(A_1)f(A_2\cup\{n\})=f(A_1\cap A_2)f(A_1\cup A_2\cup\{n\}).\]
The left-hand expression is nonzero, so $f(A_1\cap A_2)\ne0$ and $A_1\subseteq A_2$. Note that \[f(A_2)f(A_1\cup\{n\})=f(A_1)f(A_2\cup\{n\}).\]
Assume for contradiction $A_1\subset A_2$. Then $f(A_1)=f(A_1\cup\{n\})$, so $f(A_2)=f(A_2\cup\{n\})$, absurd.

