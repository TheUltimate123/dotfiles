% Input your problem and solution below.
% Three dashes on a newline indicate the breaking points.

---

Let $n$ be an positive integer. Find the smallest integer $k$ with the following property: Given any real numbers $a_1$, $\ldots$, $a_d$ such that $a_1+a_2+\cdots+a_d=n$ and $0\le a_i\le1$ for $i=1,2,\ldots,d$, it is possible to partition these numbers into $k$ groups (some of which may be empty) such that the sum of the numbers in each group is at most $1$.

---

The answer is $2n-1$, with the lower bound achieved by $a_1=a_2=\cdots=a_{2n-1}=\frac n{2n-1}$. We will now prove the upper bound suffices.

\paragraph{First solution, by local} First take all elements of the sequence that are greater than $\frac12$, and place them in their own buckets. Say there are $e$ of them. (Assume $e<2n-2$, or we are already done.)

Now we will place the remaining $d-e$ real numbers, whose sum is less than $n-\frac e2$, into $2n-1-e$ buckets. Keep on placing numbers into buckets into we find a real number $a$ that cannot fit into any of the $2n-1-e$ buckets; i.e.\ each has size at least $1-a$. Then
\[n-\frac e2>(2n-1-e)(1-a)+a\implies a>\frac12,\]
contradiction.

\paragraph{Second solution, by global} Consider the minimal partition into groups $g_1$, $g_2$, \ldots, $g_m$, with $g_1+g_2+\cdots+g_m=n$ and $g_i+g_j>1$ for all $i$, $j$ (else merge the groups).

Then
\[2n=(g_1+g_2)+(g_2+g_3)+\cdots+(g_m+g_1)>m,\]
so $m\le2n-1$, as needed.

