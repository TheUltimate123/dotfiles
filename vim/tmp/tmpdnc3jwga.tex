% Input your problem and solution below.
% Three dashes on a newline indicate the breaking points.

---

Find all $f:\mathbb Z\to\mathbb Z$ such that \[xf(2f(y)-x)+y^2f(2x-f(y))=\frac{f(x)^2}x+f(yf(y))\]
for all $x,y\in\mathbb Z$ such that $x\ne0$.

---

The answer is $f\equiv0$ and $f(x)=x^2$, which work. Notice that by hypothesis, $x\mid f(x)^2$ for all $x\ne0$. Specifically if $x=p$ is a prime, $p\mid f(p)^2$, so $p\mid\frac{f(p)^2}p$. Substituting into the original functional equation, \[y^2f(2p-f(y))\equiv f(yf(y))\pmod p\]
for all $y$ and primes $p$. Specifically if $y=0$, then $f(0)\equiv0\pmod p$ for all $p$, whence $f(0)=0$.

Now substitute $y=0$ to obtain $xf(-x)=\frac{f(x)^2}x$, id est $x^2f(-x)=f(x)^2$. Analogously $x^2f(x)=f(-x)$, so either $f(x)=f(-x)=x^2$ or $f(x)=f(-x)=0$ for all $x$.

If $f(z)=0$ but $z\ne0$, taking some $x$ with $f(x)\ne0$ and substituting $y=z$ gives $xf(-x)+z^2f(2x)=\frac{f(x)^2}x$, or $x^3+4x^2z^2=x^3$. This says $z=0$, contradiction.
