% Input your problem and solution below.
% Three dashes on a newline indicate the breaking points.

---

Let $a,b,c,d,e\ge-1$ and $a+b+c+d+e=5$. Find the maximum and minimum value of $S=(a+b)(b+c)(c+d)(d+e)(e+a)$.

---

The answers are $-512$ and $288$, achieved by $(9,-1,-1,-1,-1)$ and $(4,4,-1,-1,-1)$ respectively. Let $x_1=a+b$, $x_2=c+d$, $x_3=e+a$, $x_4=b+c$, $x_5=d+e$, so that $S=x_1x_2x_3x_4x_5$. Then by hypothesis, $\sum x_i=10$, and furthermore $x_4+x_5=5-a\le6$; hence $x_i\in[-2,8]$ for all $i$.
\begin{customenv}{Part 1: Lower bound}
    For $S$ to be negative, we need an odd number of negatives.
    \begin{itemize}
        \item If we have one negative number, WLOG $x_1$, then $|x_1|\le2$, and $|x_2+x_3+x_4+x_5|\le12$, so by AM-GM, $|x_2x_3x_4x_5|\le81$, hence $|S|\le162$.
        \item If we have three negative numbers, then the negative numbers are at most $2$, and the positive numbers are at most $8$. Thus $|S|\le512$.
        \item If all five are negative, $10\sum x_i<0$, contradiction.
    \end{itemize}
\end{customenv}
\begin{customenv}{Part 2: Upper bound}
    For $S$ to be positive, we need an even number of negatives.
    \begin{itemize}
        \item If we have no negative numbers, by AM-GM, $|S|\le32$.
        \item If we have two negative numbers, we must have two consecutive positive numberes, whose product is at most $9$ by AM-GM. The rest have an absolute product of at most $2\cdot2\cdot8=32$, so $|S|\le288$.
        \item If we have four negative numbers, then $|S|\le2^4\cdot8=128$.
    \end{itemize}
\end{customenv}
\noindent This completes the proof.
