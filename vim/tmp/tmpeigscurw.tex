% Input your problem and solution below.
% Three dashes on a newline indicate the breaking points.

---

Let $ABC$ be a scalene triangle with incenter $I$ whose incircle is tangent to $\seg{BC}$, $\seg{CA}$, $\seg{AB}$ at $D$, $E$, $F$, respectively. Denote by $M$ the midpoint of $\seg{BC}$ and let $P$ be a point in the interior of $\triangle ABC$ so that $MD=MP$ and $\angle PAB=\angle PAC$. Let $Q$ be a point on the incircle such that $\angle AQD=90\dg$. Prove that either $\angle PQE=90\dg$ or $\angle PQF=90\dg$.

---

Assume without loss of generality $AB<AC$. We will prove $\angle PQE=90\dg$.
\begin{center}
    \begin{asy}
        size(6cm); defaultpen(fontsize(10pt));
        pen pri=heavyblue;
        pen sec=heavygreen;
        pen tri=heavycyan;
        pen qua=purple;
        pen fil=pri+opacity(0.05);
        pen sfil=sec+opacity(0.05);
        pen tfil=tri+opacity(0.05);

        pair A,B,C,I,D,EE,F,M,NN,Dp,P,Q;
        A=dir(120);
        B=dir(210);
        C=dir(330);
        I=incenter(A,B,C);
        D=foot(I,B,C);
        EE=foot(I,C,A);
        F=foot(I,A,B);
        M=(B+C)/2;
        NN=(A+B)/2;
        Dp=2M-D;
        P=extension(D,EE,M,NN);
        Q=reflect(I,M)*D;

        draw(P--Q--EE,qua);
        filldraw(circle(M,length(D-M)),sfil,sec);
        draw(A--Dp,sec);
        draw(D--Q,sec);
        filldraw(incircle(A,B,C),tfil,tri);
        draw(EE--D--F,pri);
        draw(M--NN,pri+dashed);
        filldraw(A--B--C--cycle,fil,pri);

        dot("$A$",A,N);
        dot("$B$",B,SW);
        dot("$C$",C,SE);
        dot("$D$",D,SW);
        dot("$E$",EE,NE);
        dot("$F$",F,W);
        dot("$M$",M,S);
        dot("$N$",NN,NW);
        dot("$D'$",Dp,SE);
        dot("$P$",P,dir(105));
        dot("$Q$",Q,E);
    \end{asy}
\end{center}
I claim that $P$ lies on $\seg{DE}$ and $\seg{MN}$. Let $P'=\seg{AI}\cap\seg{DE}\cap\seg{MN}$, which concur by the Iran lemma. Note that $\triangle DMP\sim\triangle DCE$, but since $CD=CE$, we have $MD=MP'$. This implies $P=P'$, as claimed.

Finally
\begin{align*}
    2\da PQE&=2\da PQD+2\da DQE=\da PMD+\da DIE\\
    &=\da ECD+\da DIE=0\dg,
\end{align*}
but clearly $P$, $Q$, $E$ are not collinear (line $PE$ already intersects the incircle at two points distinct from $E$), thus $\angle PQE=90\dg$, as desired.

