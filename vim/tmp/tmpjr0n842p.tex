% Input your problem and solution below.
% Three dashes on a newline indicate the breaking points.

---

There are $n$ students standing in a circle, one behind the other. The students have heights $h_1<h_2<\cdots<h_n$. If a student with height $h_k$ is standing directly behind a student with height $h_{k-2}$ or less, the two students are permitted to switch places. Prove that it is not possible to make more than $\binom n3$ such switches before reaching a position in which no further switches are possible.

---

We say a students \emph{moves} if he swaps with the person in front of him. The key is this estimate:
\begin{iclaim*}
    The person with height $h_k$ can move at most $\binom{k-1}2$ times.
\end{iclaim*}
\begin{proof}
    Induct on $k$. The base cases $k=1$ and $k=2$ are clear. Then if the claim is true for integers less than $k$, the person with height $h_k$ can move at most \[\binom{k-2}2+(k-1)=\binom{k-1}2\]
    times; otherwise he must switch with someone of height at least $h_{k-1}$.
\end{proof}

Finally, the number of moves possible is at most \[\sum_{k=1}^n\binom{k-1}2=\binom n3\]
by Hockey-Stick, thus concluding the proof.

