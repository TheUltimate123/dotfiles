% Input your problem and solution below.
% Three dashes on a newline indicate the breaking points.

---

Define a function $f:\mathbb N\to\mathbb N$ by $f(1)=1$, $f(n+1)=f(n)+2^{f(n)}$ for every positive integer $n$. Prove that $f(1)$, $f(2)$, $\ldots$, $f(3^{2013})$ leave distinct remainders when divided by $3^{2013}$.

---

We show by induction that for all $n\ge1$ and $k$, the integers $f(k)$, $f(k+1)$, $\ldots$, $f(k+3^n-1)$ leave distinct remainders when divided by $3^n$. To this end, we proceed by induction.

The base case, $n=1$, is simple, since modulo $3$, $f$ repeats in the pattern $(1,3,2,1,3,2,\ldots)$. Assume the hypothesis holds for all $m<n$; we show it holds for $m=n$. By Chinese Remainder Theorem, for all $m<n$, $f(k)$, $f(k+1)$, $\ldots$, $f(k+3^m-1)$ cover all odd residues mod $2\cdot3^m$, so \[f(k+3^n)-f(k)=\sum_{i=1}^{3^{n-1}}2^{2i-1}=2\cdot\frac{4^{3^{n-1}}-1}3\equiv A\pmod{2\cdot 3^n},\]
which is fixed. By Lifting the Exponent, $\nu_3(4^{3^{n-1}}-1)=n$, so $A$ is either $2\cdot3^{n-1}$ or $4\cdot3^{n-1}$. It follows that $f(k)$, $f(k+1)$, $\ldots$, $f(k+3^n-1)$ cover all odd residues mod $2\cdot3^n$, which is sufficient.
\begin{boxremark}
    We can show that $A\equiv2\cdot3^{n-1}\pmod{2\cdot3^n}$ always. Removing the factor of $2$ and clearing the $3$ in the denominator, we want to show that $4^{3^{n-1}}-1\equiv3^n\pmod{3^{n+1}}$. To show this, we repeat the proof of LTE: Proceeding by induction, we show that if the hypothesis holds for $n$, it holds for $n+1$. The base case of $n\ge1$ is clear. Check that \[\frac{4^{3^n}-1}{4^{3^{n-1}}-1}\equiv 1+4^{3^{n-1}}+4^{2\cdot3^{n-1}}\equiv3\pmod9,\]
    so $4^{3^{n-1}}-1$ is of the form $3^n+3^{n+1}u$ and the above expression is of the form $3+9v$. Multiplying, \[4^{3^n}-1=(3^n+3^{n+1}u)(3+9v)\equiv3^{n+1}\pmod{3^{n+2}},\]
    as claimed.
\end{boxremark}
