% Input your problem and solution below.
% Three dashes on a newline indicate the breaking points.

---

A convex quadrilateral $ABCD$ has an inscribed circle with center $I$. Let $I_A$, $I_B$, $I_C$, $I_D$ be the incenters of the triangles $DAB$, $ABC$, $BCD$, $CDA$, respectively. Suppose that the common external tangents of the circumcircles of $\triangle AI_BI_D$ and $\triangle CI_BI_D$ meet at $X$, and the common external tangents of the circumcircles of $\triangle BI_AI_C$ and $\triangle DI_AI_C$ meet at $Y$. Prove that $\angle XIY=90^\circ$.

---

\begin{boxlemma*}
    Circles $\omega_A$ and $\omega_C$, with the radius of $\omega_A$ less than the radius of $\omega_C$, intersect at two points $I_B$ and $I_D$. Point $A$ is chosen on the circumference of $\omega_A$ but not in the interior of $\omega_C$. Point $C$ is chosen on the circumference of $\omega_C$ but not in the interior of $\omega_A$. If the common external tangents of $\oemga_A$ and $\omega_C$ intersect at $X$, then $\angle I_BXI_D=\angle I_BAI_D-\angle I_BCI_D$.
\end{boxlemma*}
\begin{proof}
    Denote by $\bullet'$ the homothety at $X$ sending $\omega_C$ to $\omega_A$. Then $X=\seg{I_BI_B'}\cap\seg{I_DI_D'}$, so with arcs taken with respect to $\omega_A$, \[\angle I_BXI_D=\frac{\widehat{I_BI_D}-\widehat{I_B'I_D'}}2=\angle I_BAI_D-\angle I_B'C'I_D'=\angle I_BAI_D-\angle I_BCI_D,\]
    as claimed.
    \begin{center}
        \begin{asy}
            size(8cm); defaultpen(fontsize(10pt));
            pen pri=heavyblue;
            pen sec=heavycyan;
            pen tri=purple;
            pen qua=heavygreen;
            pen fil=pri+opacity(0.05);
            pen sfil=sec+opacity(0.05);
            pen tfil=tri+opacity(0.05);

            real t=53.75;
            pair I,WW,X,Y,Z,A,B,C,D,IB,ID,T,U1,U2;
            I=(0,0);
            WW=dir(150+t);
            X=dir(90+t);
            Y=dir(10+t);
            Z=dir(250+t);
            A=2*WW*X/(WW+X);
            B=2*X*Y/(X+Y);
            C=2*Y*Z/(Y+Z);
            D=2*Z*WW/(Z+WW);
            IB=incenter(A,B,C);
            ID=incenter(A,D,C);
            T=2*foot(circumcenter(I,IB,ID),I,incenter(I,IB,ID))-I;
            U1=intersectionpoint(circle( (circumcenter(C,IB,ID)+T)/2,length(circumcenter(C,IB,ID)-T)/2),circumcircle(C,IB,ID));
            U2=reflect(T,circumcenter(C,IB,ID))*U1;

            pair O1,O2,IBp,IDp,Cp;
            O1=circumcenter(A,IB,ID);
            O2=circumcenter(C,IB,ID);
            IBp=T+(IB-T)*(O1-T)/(O2-T);
            IDp=T+(ID-T)*(O1-T)/(O2-T);
            Cp=T+(C-T)*(O1-T)/(O2-T);

            draw(U1--T--U2,qua);
            filldraw(circumcircle(A,IB,ID),sfil,sec);
            filldraw(circumcircle(C,IB,ID),sfil,sec);
            draw(IB--T--ID,pri+Dotted);
            draw(T--C,tri+Dotted);

            dot("$A$",A,NW);
            dot("$C$",C,E);
            dot("$C'$",Cp,SE);
            dot("$I_B$",IB,dir(110));
            dot("$I_B'$",IBp,SE);
            dot("$I_D$",ID,dir(250));
            dot("$I_D'$",IDp,NE);
            dot("$X$",T,W);
        \end{asy}
    \end{center}
\end{proof}

\begin{iclaim*}
    $I_BII_DX$ is cyclic.
\end{iclaim*}
\begin{proof}
    Without loss of generality the radius of $(AI_BI_D)$ is less than the radius of $(CI_BI_D)$. By the lemma, $\angle I_BXI_D=\angle I_BAI_D-\angle I_BCI_D$. However \[\angle I_BII_D=360\dg-A-\frac B2-\frac D2=180\dg-\frac A2+\frac C2=180\dg-\angle I_BAI_D+\angle I_BCI_D,\]
    so $I_BII_DX$ is cyclic.
\end{proof}
\begin{center}
    \begin{asy}
        size(8cm); defaultpen(fontsize(10pt));
        pen pri=heavyblue;
        pen sec=heavycyan;
        pen tri=purple;
        pen qua=heavygreen;
        pen fil=pri+opacity(0.05);
        pen sfil=sec+opacity(0.05);
        pen tfil=tri+opacity(0.05);

        real t=53.75;
        pair I,WW,X,Y,Z,A,B,C,D,IB,ID,T,U1,U2;
        I=(0,0);
        WW=dir(150+t);
        X=dir(90+t);
        Y=dir(10+t);
        Z=dir(250+t);
        A=2*WW*X/(WW+X);
        B=2*X*Y/(X+Y);
        C=2*Y*Z/(Y+Z);
        D=2*Z*WW/(Z+WW);
        IB=incenter(A,B,C);
        ID=incenter(A,D,C);
        T=2*foot(circumcenter(I,IB,ID),I,incenter(I,IB,ID))-I;
        U1=intersectionpoint(circle( (circumcenter(C,IB,ID)+T)/2,length(circumcenter(C,IB,ID)-T)/2),circumcircle(C,IB,ID));
        U2=reflect(T,circumcenter(C,IB,ID))*U1;

        filldraw(circumcircle(IB,I,ID),tfil,tri);
        draw(U1--T--U2,qua);
        filldraw(circumcircle(A,IB,ID),sfil,sec);
        filldraw(circumcircle(C,IB,ID),sfil,sec);
        filldraw(A--B--C--D--cycle,fil,pri);
        draw(B--I--D,pri);
        draw(A--C,pri);
        //filldraw(circle(I,1),fil,pri);
        filldraw(incircle(A,B,C),fil,pri);
        filldraw(incircle(A,D,C),fil,pri);

        dot("$I$",I,E);
        dot("$A$",A,W);
        dot("$B$",B,N);
        dot("$C$",C,E);
        dot("$D$",D,S);
        dot("$I_B$",IB,dir(10));
        dot("$I_D$",ID,dir(-10));
        dot("$X$",T,W);
    \end{asy}
\end{center}

By symmetry, $XI_B=XI_D$, so $\seg{IX}$ bisects $\angle BID$. Analogously $\seg{IY}$ bisects $\angle AIC$. It is easy to check that $\angle AIB+\angle CID=180\dg$, so $\seg{AI}$ and $\seg{CI}$ are isogonal with respect to $\angle BID$. Hence $\seg{IX}\perp\seg{IY}$, as desired.

