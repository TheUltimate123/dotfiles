% Input your problem and solution below.
% Three dashes on a newline indicate the breaking points.
% vim: tw=72

---

Let $\mathbb Z$ be the set of all integers. Find all pairs of integers $(a,b)$ for which there exist functions $f:\mathbb Z\to\mathbb Z$ and $g:\mathbb Z\to\mathbb Z$ satisfying \[f\big(g(x)\big)=x+a\quad\text{and}\quad g\big(f(x)\big)=x+b\]
for all integers $x$.

---

The answer is $(a,\pm a)$. First, we verify that $(a,a)$ works. Take $f(x)=x+2a$ and $g(x)=x-a$, so that
\begin{itemize}[itemsep=0em]
    \item $f\big(g(x)\big)=(x-a)+2a=x+a$, and
    \item $g\big(f(x)\big)=(x+2a)-a=x+a$.
\end{itemize}
Now, we verify that $(a,-a)$ works. Take $f(x)=2a-x$ and $g(x)=a-x$, so that
\begin{itemize}[itemsep=0em]
    \item $f\big(g(x)\big)=2a-(a-x)=x+a$, and
    \item $g\big(f(x)\big)=a-(2a-x)=x-a$.
\end{itemize}
We now show that these are the only solutions. Clearly if $a$ or $b$ equals $0$, the problem is trivial, so assume $a,b\ne 0$. Taking $f\big(g(x)\big)=x+a$ modulo $|a|$, we have \[f\big(g(x)\big)\equiv x\pmod{|a|}.\]
Similarly, $g\big(f(x)\big)\equiv x\pmod{|b|}$. However, \[f(x)+a=f\Big(g\big(f(x)\big)\Big)=f(x+b),\]
and analogously $g(x)+b=g(x+a)$. Hence, outputs of $g(x)$ modulo $b$ depend on $x$ modulo $|a|$. Since $f\big(g(x)\big)\equiv x\pmod{|a|}$ for all $x$, $f(x)$ outputs all $|a|$ residues mod $|a|$. Similarly, $g(x)$ outputs all $|b|$ residues mod $|b|$. Then, $g\big(f(x)\big)$ can have at most $|a|$ different residues modulo $|b|$.

However, for all $x$, $g\big(f(x)\big)\equiv x\pmod{|b|}$, so $g\big(f(x)\big)$ must output all $|b|$ residues mod $|b|$. Hence, $|a|\ge |b|$. Similarly, $f\big(g(x)\big)$ outputs at most $|b|$ residues mod $a$, but must cover all $|a|$ residues, so $|a|\le |b|$. Thus $|a|=|b|$, as desired.

